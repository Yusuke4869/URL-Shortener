# ドキュメント作成ガイドライン

## 概要

このドキュメントは、Markdown ドキュメントの作成・管理規約を定義します。
統一された形式により、読みやすく保守しやすいドキュメントを作成することを目的とします。

**プロジェクト非依存の汎用ガイドライン**: このドキュメントは特定のプロジェクトに固有の内容を含まず、あらゆる開発プロジェクトで適用可能な汎用的な原則を記述しています。

新しいドキュメント作成時やドキュメント更新時は、必ずこのガイドラインを参照し、既存ドキュメントとの整合性を保ってください。
md ファイルのソースとレンダリング後の両方で読みやすいドキュメントを作成することを重視します。

## 基本原則

### 内容指針

**What/Why 重視、How 最小限**:

- **What（何を）**: ドキュメントが何を定義するかを明確に記述
- **Why（なぜ）**: その原則や規約が必要な理由を説明
- **How（どのように）**: 具体的な実装方法は最小限に留める

❌ 避けるべき例：具体的な実装詳細

```typescript
// 特定のプロジェクトに依存する実装例
export const getUsersFromDatabase = async (connection: DatabaseConnection) => {
  const result = await connection.query("SELECT * FROM users");
  return result.map((user) => ({ id: user.id, name: user.name }));
};
```

✅ 推奨例：原則と指針

```
- データアクセスの抽象化
- エラーハンドリングの実装
- 適切な型定義の使用
- 単一責任の原則
```

**実装指針としての役割**:

- プロジェクト固有の詳細ではなく、汎用的な原則を記述
- 開発者が判断するための指針を提供
- 具体的なファイル名や設定値は避ける
- チーム間での一貫した実装アプローチの確立
- 技術選択における意思決定基準の明確化
- ベストプラクティスの共有と標準化

### ファイル命名規約

**ファイル名**: 英語のケバブケース（小文字・ハイフン区切り）

- user-management.md
- database-design.md
- api-specification.md
- deployment-guide.md

**注意**: ファイル名に「guidelines」や「guide」などの語を含めることを禁止します。
内容から目的が明確に分かる名称を使用してください。

**内容の言語**: 日本語

- 見出し、本文、説明文は日本語で記述
- コード例やコマンドは英語のまま
- 技術用語は適切な日本語訳を使用（必要に応じて英語併記）

## レイアウトルール

### 空行の使用

**見出しの前後**: 必ず 1 行ずつ空行を入れる

**コードブロックの前後**: 必ず 1 行ずつ空行を入れる

**箇条書きの前後**: 必ず 1 行ずつ空行を入れる

### インデントルール

**基本インデント**: 2 スペース

```markdown
- レベル1
  - レベル2
    - レベル3
      - レベル4

1. 番号付きリスト
   - サブアイテム
     - さらにサブアイテム
```

```typescript
if (condition) {
  console.log("2スペースインデント");
  if (nested) {
    console.log("ネストも2スペース");
  }
}
```

## コード例の記述ルール

### ファイル場所の明示

**コード例には必ず場所情報を記載**

```typescript
// src/services/user-service.ts（例：実際のファイル場所を明記）
class UserService {
  constructor(private userRepository: UserRepository) {}

  async getAllUsers(): Promise<User[]> {
    return await this.userRepository.findAll();
  }

  async createUser(userData: UserData): Promise<User> {
    return await this.userRepository.create(userData);
  }
}
```

### コメントの活用

**日本語コメントでの説明**:

```typescript
// src/middleware/auth.ts（例：実際のミドルウェアファイル場所）
// 認証処理を行うミドルウェア
export const authMiddleware = async (
  req: Request,
  res: Response,
  next: NextFunction,
) => {
  const token = req.headers.authorization?.split(" ")[1];

  if (!token) {
    return res.status(401).json({ error: "認証トークンが必要です" });
  }

  try {
    // トークンの検証処理
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(403).json({ error: "無効なトークンです" });
  }
};
```

## 文書の表現規約

### 記述スタイル

**統一した表現を使用**:

- 〜します（断定的）
- 〜してください（指示）
- 〜することができます（可能性）
- 〜する必要があります（必要性）

### 文章構造

**1 行ごとに改行**: 日本語の文章は 1 文ごとに改行します。
文章のまとまりが異なる場合は空行を入れて区切ります。

**英単語の前後に空白**:
日本語文章中に英単語を含める場合は、前後に半角空白を入れます。

**数値記号の使用**: 数値や記号は半角英数字を使用します。

**技術用語の統一**:

- ファイル
- ディレクトリ
- リポジトリ
- インターフェース
- プロパティ
- ライブラリ

### 強調表現

**重要度に応じた強調方法**:

```markdown
- **太字**: 重要な概念・キーワード
- `コード形式`: ファイル名・コマンド・変数名
- 引用: 注意事項・重要な補足
- ⚠️ 警告アイコン: 重大な注意事項
- ✅ チェックマーク: 推奨事項
- ❌ バツマーク: 非推奨事項
```

## リンクとクロスリファレンス

### 内部リンク

**相対パス**を使用してドキュメント間をリンク

**目次リンク**の活用

### 外部リンク

**公式ドキュメント**への適切なリンク:

## テーブルの記述

### 整列とフォーマット

**見やすいテーブル形式**:

```markdown
|項目|説明|例|
|:-:|:-:|:-:|
|ファイル名|ケバブケースで命名|`user-management.md`|
|見出し|日本語で記述|`## データベース設計`|
|コードブロック言語|適切な言語指定|```typescript|
|インデント|2 スペースで統一|`console.log('example');`|
```

**テーブル記述ルール**:

- ヘッダー行の区切りには `:-:` のみを使用
- 左右の空白は設けない
- 中央揃えを基本とする

## コード記載時の制限事項

### 実在コードのみ記載

**存在しないコードの記載を禁止**します。
ドキュメントに記載するコードは以下の条件を満たす必要があります：

- 実際にプロジェクト内に存在するコード
- 動作確認済みのコード

### ドキュメントとコードの同期

**コード変更時のドキュメント更新**:
コードを更新した際は、必ず以下を確認してください。

- 関連するドキュメントの内容が最新の実装と一致しているか
- 新しい機能や変更された仕様がドキュメントに反映されているか
- コード例やファイルパスが正確であるか

**更新が必要な場合**:
ドキュメントの修正が必要と判断された場合は、コード変更と同時にドキュメントも更新してください。
これにより、常に実装とドキュメントの整合性を保つことができます。

### 禁止事項

**メタデータ表記の禁止**:
ドキュメント内に以下のようなメタデータ表記を含めることを禁止します。

- エディタ固有の注釈やマーカー
- 自動生成されるメタ情報

これらは読みやすさを損なうため、クリーンな Markdown
ドキュメントを維持してください。

## ドメイン固有チェックリストの追加

### 各ドキュメントのチェックリスト

**各ドキュメントファイルの最後には、そのドメインに固有のチェックリストを設置**します。
これにより、コードやドキュメントがガイドラインに沿っているかを確認できます。

**チェックリストの構成例**:

```markdown
## [ドメイン名]品質チェックリスト

### セクション1

- [ ] 確認項目1
- [ ] 確認項目2

### セクション2

- [ ] 確認項目3
- [ ] 確認項目4
```

## ドキュメント品質チェックリスト

ドキュメント作成・更新時の確認事項：

### 構造と形式

- [ ] ファイル名は英語のケバブケース（「guidelines」「guide」等を含まない）
- [ ] 内容は日本語で記述
- [ ] 見出しの前後に空行（## や **強調見出し** などを含む）
- [ ] コードブロックの前後に空行
- [ ] 箇条書きの前後に空行
- [ ] インデントは 2 スペースで統一
- [ ] 日本語文章は 1 文ごとに改行
- [ ] 英単語の前後に半角空白
- [ ] 数値記号は半角英数字を使用
- [ ] テーブルは `:-:` のみ使用（空白なし）

### 内容の品質

- [ ] 目的と概要が明確
- [ ] **What（何を）** が明確に定義されている
- [ ] **Why（なぜ）** その原則が必要かの理由が説明されている
- [ ] **How（どのように）** の具体的実装詳細は最小限に留めている
- [ ] プロジェクト固有の詳細ではなく汎用的な原則を記述
- [ ] 開発者が判断するための指針を提供している
- [ ] 具体的なファイル名や設定値を避けている
- [ ] コード例は原則の説明に必要最小限のもののみ
- [ ] 具体例・コード例が適切
- [ ] ファイル場所が明記（コード例に含む）
- [ ] 用語の統一（技術用語リストに準拠）
- [ ] 内部リンクが正確（相対パスを使用）
- [ ] 外部リンクが有効
- [ ] 実在するコードのみ記載
- [ ] コード変更時にドキュメント更新を確認
- [ ] メタデータ表記を含まない
- [ ] 記述スタイルが統一されている（〜します、〜してください等）
- [ ] 日本語コメントで適切にコード説明
- [ ] ドメイン固有のチェックリストが文書の内容に沿った上で文書の最後に設置されている

### 読みやすさ

- [ ] 適切な見出しレベル
- [ ] 論理的な構成
- [ ] 図表の効果的な使用
- [ ] 強調表現の適切な使用（太字、コード形式、引用、アイコン等）
- [ ] 文章の簡潔さ
- [ ] Markdown チェックボックスを適切に活用
- [ ] md ファイルのソースとレンダリング後の両方で読みやすい
